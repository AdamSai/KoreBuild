<Project>
  <PropertyGroup>
    <SharedSourcesFolder>$(RepositoryRoot)shared/</SharedSourcesFolder>
  </PropertyGroup>

  <!-- DisableDefaultItems only when you really want to control what is built and tested. Otherwise, use the Exclude* item groups -->
  <ItemGroup Condition="'$(DisableDefaultItems)' != 'true'">
    <Solutions Include="$(RepositoryRoot)\*.sln" />
    <Solutions Remove="@(ExcludeSolutions)" />

    <ProjectsToPack Include="$(RepositoryRoot)src\*\*.csproj" />
    <ProjectsToPack Remove="@(ExcludeFromPack)" />

    <SharedSourceDirectories Include="$([System.IO.Directory]::GetDirectories(&quot;$(SharedSourcesFolder)&quot;, '*.Sources'))" Condition="Exists('$(SharedSourcesFolder)')" />
    <SharedSourceDirectories Remove="@(ExcludeSharedSourceDirectories)" />

    <!-- put unit test projects ahead of functional tests -->
    <_FunctionalTests Include="$(RepositoryRoot)test\*\*FunctionalTest*.csproj" />
    <ProjectsToTest Include="$(RepositoryRoot)test\*\*.csproj" Exclude="@(_FunctionalTests)" />
    <ProjectsToTest Include="@(_FunctionalTests)"  />
    <ProjectsToTest Remove="@(ExcludeFromTest)" />
  </ItemGroup>

</Project>